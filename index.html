<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Countdown to School!</title>
    <style>
        :root {
            --accent: #0057b8;
            --accent2: #ffd200;
            --bg: #f7f8fa;
            --card-bg: #fff;
            --text: #222;
            --muted: #888;
            --shadow: 0 4px 24px 0 rgba(0,0,0,0.07);
        }
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        header {
            width: 100%;
            padding: 2rem 0 1rem 0;
            background: linear-gradient(90deg, var(--accent), var(--accent2) 80%);
            color: #fff;
            box-shadow: var(--shadow);
            text-align: center;
        }
        header h1 {
            margin: 0;
            font-size: 2.3rem;
            font-weight: 700;
            letter-spacing: 1px;
        }
        #main-menu {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0 1rem 0;
        }
        .menu-btn {
            background: var(--accent2);
            color: var(--accent);
            border: none;
            border-radius: 6px;
            padding: 0.6em 1.2em;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
        }
        .menu-btn.active, .menu-btn:hover {
            background: var(--accent);
            color: var(--accent2);
        }
        .menu-btn:focus {
            outline: 2px solid var(--accent2);
            outline-offset: 2px;
        }
        #dark-toggle {
            position: fixed;
            top: 18px;
            right: 18px;
            background: var(--accent2);
            color: var(--accent);
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 2px 8px #0057b844;
            transition: background 0.2s, color 0.2s;
            z-index: 11;
        }
        #dark-toggle.dark {
            background: var(--accent);
            color: var(--accent2);
        }
        #user-time {
            position: fixed;
            top: 18px;
            left: 18px;
            font-size: 1.1rem;
            font-weight: bold;
            z-index: 11;
            background: var(--card-bg);
            color: var(--accent);
            padding: 0.4em 1em;
            border-radius: 8px;
            box-shadow: 0 2px 8px #0057b822;
        }
        main {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #countdown-card, #study-tips-section, #note-tips-section, #time-section, #settings-section {
            background: var(--card-bg);
            border-radius: 18px;
            box-shadow: var(--shadow);
            padding: 2.5rem 2rem 2rem 2rem;
            margin-top: 12rem;
            min-width: 340px;
            max-width: 98vw;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #see-you {
            font-size: 1.35rem;
            color: var(--accent);
            font-weight: 700;
            margin-bottom: 1.3rem;
            text-align: center;
        }
        #countdown {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            justify-content: center;
        }
        .countdown-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 80px;
            max-width: 110px;
            flex: 1 1 18%;
        }
        .countdown-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--accent);
            background: linear-gradient(90deg, var(--accent), var(--accent2) 80%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
            margin-bottom: 0.2rem;
            border-radius: 12px;
            background-color: #fff;
            padding: 0.4em 0.7em;
            min-width: 2.2em;
            box-sizing: border-box;
            box-shadow: 0 2px 8px #0057b822;
            transition: background 0.2s, box-shadow 0.2s, color 0.2s, opacity 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
        }
        .countdown-value.changed {
            opacity: 0.3;
            transition: opacity 0.2s;
        }
        .countdown-label {
            font-size: 1rem;
            color: var(--muted);
            letter-spacing: 1px;
            text-align: center;
        }
        #progress-bar-container {
            width: 100%;
            max-width: 400px;
            height: 10px;
            background: #e3eafc;
            border-radius: 5px;
            margin: 1.5rem 0 0.5rem 0;
            overflow: hidden;
        }
        #progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent2), var(--accent));
            width: 0%;
            transition: width 0.3s;
        }
        #message {
            font-size: 1.5rem;
            color: var(--accent);
            margin: 1.5rem 0 0.5rem 0;
            font-weight: 600;
        }
        #share-btn {
            margin-top: 1.5rem;
            background: var(--accent2);
            color: var(--accent);
            border: none;
            border-radius: 7px;
            padding: 10px 22px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 2px 8px #0057b844;
            transition: background 0.2s, color 0.2s;
        }
        #share-btn:hover {
            background: var(--accent);
            color: var(--accent2);
        }
        #study-tips-section h2, #note-tips-section h2, #time-section h2, #settings-section h2 {
            color: var(--accent);
            margin-bottom: 1rem;
        }
        #study-tips-section ol, #note-tips-section ul {
            font-size: 1.1rem;
            color: var(--text);
            padding-left: 1.2em;
        }
        #note-tips-section p {
            font-size: 1.1rem;
            color: var(--text);
            margin: 0.5em 0;
        }
        #all-timezones table {
            width: 100%;
            max-width: 500px;
            border-collapse: collapse;
        }
        #all-timezones td {
            padding: 0.3em 0.7em;
        }
        .footer {
            width: 100%;
            background: linear-gradient(90deg, var(--accent2) 0%, var(--accent) 100%);
            color: #fff;
            text-align: center;
            padding: 2.5rem 1rem 2.5rem 1rem;
            margin-top: 3rem;
            font-size: 1.25rem;
            font-weight: 500;
            letter-spacing: 1px;
            box-shadow: 0 -2px 16px #0057b822;
            border-top-left-radius: 32px;
            border-top-right-radius: 32px;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .footer-quote-container {
            position: relative;
            width: 100%;
            min-height: 60px;
            max-width: 700px;
            margin: 0 auto;
            overflow: hidden;
            height: 3.5em;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .footer-quote {
            position: absolute;
            left: 0;
            right: 0;
            opacity: 1;
            transition: transform 0.7s cubic-bezier(.77,0,.18,1), opacity 0.5s;
            font-size: 1.15rem;
            font-style: italic;
            color: #fff;
            text-shadow: 1px 1px 6px #0057b8cc;
            will-change: transform, opacity;
            padding: 0 1em;
            word-break: break-word;
            white-space: normal;
            text-align: center;
            box-sizing: border-box;
        }
        .footer-quote.slide-out {
            transform: translateX(-120%);
            opacity: 0;
        }
        .footer-quote.slide-in {
            transform: translateX(120%);
            opacity: 0;
        }
        .footer-quote.active {
            transform: translateX(0);
            opacity: 1;
        }
        .footer-author {
            margin-top: 1rem;
            font-size: 1rem;
            font-weight: 400;
            color: #fffbe6;
            opacity: 0.85;
            min-height: 1.5em;
            transition: opacity 0.5s;
        }
        @media (max-width: 600px) {
            #countdown-card, #study-tips-section, #note-tips-section, #time-section, #settings-section {
                padding: 1rem 0.2rem 1rem 0.2rem;
                min-width: unset;
                max-width: 100vw;
                margin-top: 14rem;
            }
            #see-you {
                font-size: 1.05rem;
                margin-bottom: 0.7rem;
            }
            #countdown {
                gap: 0.5rem;
                flex-wrap: wrap;
                justify-content: center;
                width: 100%;
            }
            .countdown-section {
                min-width: 60px;
                max-width: 90px;
                flex: 1 1 40%;
                box-sizing: border-box;
                padding: 0 1px;
            }
            .countdown-value {
                font-size: 1.25rem;
                padding: 0.25em 0.3em;
                min-width: 2em;
                margin-top: 0;
            }
            .countdown-label {
                font-size: 0.8rem;
            }
            .footer {
                font-size: 0.95rem;
                padding: 1rem 0.2rem 1rem 0.2rem;
                min-height: 80px;
            }
            .footer-quote-container {
                min-height: 40px;
                height: auto;
                max-width: 98vw;
            }
            .footer-quote {
                font-size: 0.95rem;
                padding: 0 0.3em;
            }
            .footer-author {
                font-size: 0.85rem;
                min-height: 1em;
            }
        }
        body.dark-mode {
            --bg: #181c23;
            --card-bg: #232a36;
            --text: #f7f8fa;
            --muted: #b2b8c6;
        }
        body.dark-mode header {
            background: linear-gradient(90deg, #222c3c, var(--accent) 80%);
            color: var(--accent2);
        }
        body.dark-mode #countdown-card,
        body.dark-mode #study-tips-section,
        body.dark-mode #note-tips-section,
        body.dark-mode #time-section,
        body.dark-mode #settings-section {
            background: var(--card-bg);
            color: var(--text);
        }
        body.dark-mode .countdown-value {
            color: var(--accent2);
            background: linear-gradient(90deg, var(--accent2), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
            background-color: #232a36;
        }
        body.dark-mode #message {
            color: var(--accent2);
        }
        body.dark-mode #progress-bar-container {
            background: #232a36;
        }
        body.dark-mode #progress-bar {
            background: linear-gradient(90deg, var(--accent), var(--accent2));
        }
        body.dark-mode #share-btn {
            background: var(--accent);
            color: var(--accent2);
        }
        body.dark-mode #share-btn:hover {
            background: var(--accent2);
            color: var(--accent);
        }
        /* === Screen size classes for user override === */
        body.screen-small #countdown-card,
        body.screen-small #study-tips-section,
        body.screen-small #note-tips-section,
        body.screen-small #time-section,
        body.screen-small #settings-section {
            max-width: 340px !important;
            font-size: 0.95rem !important;
        }
        body.screen-medium #countdown-card,
        body.screen-medium #study-tips-section,
        body.screen-medium #note-tips-section,
        body.screen-medium #time-section,
        body.screen-medium #settings-section {
            max-width: 600px !important;
            font-size: 1.05rem !important;
        }
        body.screen-large #countdown-card,
        body.screen-large #study-tips-section,
        body.screen-large #note-tips-section,
        body.screen-large #time-section,
        body.screen-large #settings-section {
            max-width: 900px !important;
            font-size: 1.15rem !important;
        }
        body.screen-xlarge #countdown-card,
        body.screen-xlarge #study-tips-section,
        body.screen-xlarge #note-tips-section,
        body.screen-xlarge #time-section,
        body.screen-xlarge #settings-section {
            max-width: 1400px !important;
            font-size: 1.25rem !important;
        }
    </style>
</head>
<body>
    <header>
        <h1>Countdown to School</h1>
    </header>
    <nav id="main-menu" role="tablist" aria-label="Main sections">
        <button class="menu-btn active"
            role="tab"
            aria-selected="true"
            aria-controls="countdown-card"
            id="tab-countdown"
            tabindex="0">
            Countdown
        </button>
        <button class="menu-btn"
            role="tab"
            aria-selected="false"
            aria-controls="study-tips-section"
            id="tab-study"
            tabindex="-1">
            Study Tips
        </button>
        <button class="menu-btn"
            role="tab"
            aria-selected="false"
            aria-controls="note-tips-section"
            id="tab-note"
            tabindex="-1">
            Note Taking Tips
        </button>
        <button class="menu-btn"
            role="tab"
            aria-selected="false"
            aria-controls="time-section"
            id="tab-time"
            tabindex="-1">
            Time
        </button>
        <button class="menu-btn"
            role="tab"
            aria-selected="false"
            aria-controls="settings-section"
            id="tab-settings"
            tabindex="-1">
            Settings
        </button>
    </nav>
    <button id="dark-toggle" title="Toggle dark mode">🌙</button>
    <div id="user-time"></div>
    <main>
        <section id="countdown-card" role="tabpanel" aria-labelledby="tab-countdown">
            <div id="see-you">See you August 25th!</div>
            <div id="countdown">
                <div class="countdown-section">
                    <div class="countdown-value" id="days">00</div>
                    <div class="countdown-label">Days</div>
                </div>
                <div class="countdown-section">
                    <div class="countdown-value" id="hours">00</div>
                    <div class="countdown-label">Hours</div>
                </div>
                <div class="countdown-section">
                    <div class="countdown-value" id="minutes">00</div>
                    <div class="countdown-label">Minutes</div>
                </div>
                <div class="countdown-section">
                    <div class="countdown-value" id="seconds">00</div>
                    <div class="countdown-label">Seconds</div>
                </div>
                <div class="countdown-section">
                    <div class="countdown-value" id="milliseconds">000</div>
                    <div class="countdown-label">Milliseconds</div>
                </div>
            </div>
            <div id="progress-bar-container">
                <div id="progress-bar"></div>
            </div>
            <div id="message"></div>
            <button id="share-btn">Share Countdown</button>
        </section>
        <section id="study-tips-section" role="tabpanel" aria-labelledby="tab-study" style="display:none;">
            <h2>Study Tips</h2>
            <ol>
                <li>
                    <strong>Active recall:</strong> Cover your materials and attempt to recall key concepts from memory. Write down or say out loud the information you remember. Check your accuracy against your notes, then refine weak areas.
                </li>
                <li>
                    <strong>Spaced Repetition:</strong> Learn the material initially. Review it after one day then, three days, then one week, and so on. As you become more confident, extend the gaps between reviews.
                </li>
            </ol>
        </section>
        <section id="note-tips-section" role="tabpanel" aria-labelledby="tab-note" style="display:none;">
            <h2>Note Taking Tips</h2>
            <ul>
                <li>
                    <strong>Cornell Method:</strong>
                    <ul>
                        <li><strong>Cue Column (left):</strong> Keywords, questions, or prompts related to the content.</li>
                        <li><strong>Notes (Right):</strong> Detailed explanations and key information.</li>
                        <li><strong>Summary (Bottom):</strong> Concise review of the main takeaways.</li>
                    </ul>
                </li>
            </ul>
        </section>
        <section id="time-section" role="tabpanel" aria-labelledby="tab-time" style="display:none;">
            <h2>Time in All Time Zones</h2>
            <div id="all-timezones"></div>
        </section>
        <section id="settings-section" role="tabpanel" aria-labelledby="tab-settings" style="display:none;">
            <h2>Settings</h2>
            <label for="timezone-select"><strong>Select your time zone:</strong></label>
            <select id="timezone-select" style="margin-left:1em;margin-bottom:1em;"></select>
            <div id="timezone-current" style="margin-top:1em;"></div>
            <hr style="margin:2em 0 1em 0;width:100%;max-width:400px;">
            <label for="screen-size-select"><strong>Choose your screen size:</strong></label>
            <select id="screen-size-select" style="margin-left:1em;margin-bottom:1em;">
                <option value="auto">Auto (Responsive)</option>
                <option value="small">Small (Phone)</option>
                <option value="medium">Medium (Tablet)</option>
                <option value="large">Large (Desktop)</option>
                <option value="xlarge">Extra Large (Big Monitor)</option>
            </select>
            <div id="screen-size-current" style="margin-top:1em;"></div>
        </section>
    </main>
    <canvas id="confetti-canvas" style="position:fixed;pointer-events:none;top:0;left:0;width:100vw;height:100vh;z-index:100;display:none;"></canvas>
    <audio id="cheer-sound" src="https://cdn.pixabay.com/audio/2022/07/26/audio_124bfae5e5.mp3"></audio>
    <footer class="footer" id="footer-inspire">
        <div class="footer-quote-container">
            <div class="footer-quote active" id="footer-quote">
                "The only way to do great work is to love what you do."
            </div>
            <div class="footer-quote" id="footer-quote-next" style="display:none"></div>
        </div>
        <div class="footer-author" id="footer-author">
            – Steve Jobs
        </div>
    </footer>
    <script>
        // === ACCESSIBLE MENU SWITCHING ===
        const menuBtns = document.querySelectorAll('.menu-btn');
        const tabPanels = [
            document.getElementById('countdown-card'),
            document.getElementById('study-tips-section'),
            document.getElementById('note-tips-section'),
            document.getElementById('time-section'),
            document.getElementById('settings-section')
        ];

        menuBtns.forEach((btn, idx) => {
            btn.addEventListener('click', function() {
                menuBtns.forEach((b, i) => {
                    b.classList.remove('active');
                    b.setAttribute('aria-selected', 'false');
                    b.setAttribute('tabindex', '-1');
                    tabPanels[i].style.display = 'none';
                });
                this.classList.add('active');
                this.setAttribute('aria-selected', 'true');
                this.setAttribute('tabindex', '0');
                tabPanels[idx].style.display = '';
                tabPanels[idx].focus && tabPanels[idx].focus();
            });
            btn.addEventListener('keydown', function(e) {
                let newIdx = null;
                if (e.key === 'ArrowRight') {
                    newIdx = (idx + 1) % menuBtns.length;
                } else if (e.key === 'ArrowLeft') {
                    newIdx = (idx - 1 + menuBtns.length) % menuBtns.length;
                }
                if (newIdx !== null) {
                    menuBtns[newIdx].focus();
                    menuBtns[newIdx].click();
                    e.preventDefault();
                }
            });
        });

        // === CONFIG ===
        const targetDate = new Date("August 25, 2025 08:27:00").getTime();
        const startDate = new Date("June 6, 2025 11:45:00").getTime();
        const quotes = [
            { text: "The only way to do great work is to love what you do.", author: "Steve Jobs" },
            { text: "Education is the most powerful weapon which you can use to change the world.", author: "Nelson Mandela" },
            { text: "Success is not the key to happiness. Happiness is the key to success.", author: "Albert Schweitzer" },
            { text: "The future belongs to those who believe in the beauty of their dreams.", author: "Eleanor Roosevelt" },
            { text: "You are never too old to set another goal or to dream a new dream.", author: "C.S. Lewis" },
            { text: "The expert in anything was once a beginner.", author: "Helen Hayes" },
            { text: "It always seems impossible until it’s done.", author: "Nelson Mandela" },
            { text: "Don’t let what you cannot do interfere with what you can do.", author: "John Wooden" },
            { text: "The beautiful thing about learning is that no one can take it away from you.", author: "B.B. King" },
            { text: "Your education is a dress rehearsal for a life that is yours to lead.", author: "Nora Ephron" }
        ];

        // === COUNTDOWN LOGIC ===
        function pad(num, size = 2) {
            return num.toString().padStart(size, '0');
        }

        let prev = {
            days: null, hours: null, minutes: null, seconds: null, milliseconds: null
        };

        function updateCountdown() {
            const now = new Date().getTime();
            let timeLeft = targetDate - now;

            if (timeLeft <= 0) {
                document.getElementById("countdown").style.display = "none";
                document.getElementById("progress-bar").style.width = "100%";
                document.getElementById("message").innerHTML = "And we're back!";
                document.getElementById("confetti-canvas").style.display = "block";
                launchConfetti();
                document.getElementById("cheer-sound").play();
                return;
            }

            const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
            const milliseconds = Math.floor(timeLeft % 1000);

            updateValue("days", pad(days), prev.days);
            updateValue("hours", pad(hours), prev.hours);
            updateValue("minutes", pad(minutes), prev.minutes);
            updateValue("seconds", pad(seconds), prev.seconds);
            updateValue("milliseconds", pad(milliseconds, 3), prev.milliseconds);

            prev = { days, hours, minutes, seconds, milliseconds };

            const total = targetDate - startDate;
            const elapsed = now - startDate;
            const percent = Math.max(0, Math.min(100, (elapsed / total) * 100));
            document.getElementById("progress-bar").style.width = percent + "%";
        }

        function updateValue(id, value, prevValue) {
            const el = document.getElementById(id);
            if (el.textContent !== value) {
                el.classList.add('changed');
                setTimeout(() => {
                    el.textContent = value;
                    el.classList.remove('changed');
                }, 120);
            }
        }

        setInterval(updateCountdown, 1000 / 540);
        updateCountdown();

        // === FOOTER QUOTES SLIDE ANIMATION ===
        let quoteOrder = [];
        let quoteIndex = 0;
        let isAnimating = false;

        function shuffleQuotes() {
            quoteOrder = Array.from({length: quotes.length}, (_, i) => i);
            for (let i = quoteOrder.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [quoteOrder[i], quoteOrder[j]] = [quoteOrder[j], quoteOrder[i]];
            }
            quoteIndex = 0;
        }

        const quoteDivA = document.getElementById("footer-quote");
        const quoteDivB = document.getElementById("footer-quote-next");
        const authorDiv = document.getElementById("footer-author");
        let showingA = true;

        function showFooterQuote() {
            if (isAnimating) return;
            isAnimating = true;

            let currentDiv = showingA ? quoteDivA : quoteDivB;
            let nextDiv = showingA ? quoteDivB : quoteDivA;

            if (quoteIndex >= quotes.length) shuffleQuotes();
            const idx = quoteOrder[quoteIndex];
            nextDiv.textContent = `"${quotes[idx].text}"`;
            nextDiv.style.display = "";
            nextDiv.className = "footer-quote slide-in";
            authorDiv.style.opacity = 0;
            quoteIndex++;

            currentDiv.className = "footer-quote active";
            setTimeout(() => {
                currentDiv.className = "footer-quote slide-out";
                nextDiv.className = "footer-quote slide-in";
                setTimeout(() => {
                    nextDiv.className = "footer-quote active";
                    currentDiv.style.display = "none";
                    authorDiv.textContent = `– ${quotes[idx].author}`;
                    authorDiv.style.opacity = 1;
                    showingA = !showingA;
                    isAnimating = false;
                }, 700);
            }, 20);
        }

        shuffleQuotes();
        setInterval(showFooterQuote, 7000);

        // === SHARE BUTTON ===
        document.getElementById("share-btn").onclick = function() {
            const url = window.location.href;
            const text = "Check out this modern countdown to school!";
            if (navigator.share) {
                navigator.share({ title: document.title, text, url });
            } else {
                navigator.clipboard.writeText(url);
                alert("Link copied to clipboard!");
            }
        };

        // === DARK MODE TOGGLE ===
        const darkToggle = document.getElementById("dark-toggle");
        darkToggle.onclick = function() {
            document.body.classList.toggle("dark-mode");
            darkToggle.classList.toggle("dark");
            darkToggle.textContent = document.body.classList.contains("dark-mode") ? "☀️" : "🌙";
        };

        // === TIME ZONES DATA ===
        const timeZones = [
            "Pacific/Midway","America/Anchorage","America/Los_Angeles","America/Denver","America/Chicago","America/New_York",
            "America/Sao_Paulo","Europe/London","Europe/Paris","Europe/Moscow","Asia/Dubai","Asia/Kolkata","Asia/Bangkok",
            "Asia/Hong_Kong","Asia/Tokyo","Australia/Sydney","Pacific/Auckland"
        ];
        const tzLabels = {
            "Pacific/Midway":"Midway (UTC-11)",
            "America/Anchorage":"Anchorage (UTC-9)",
            "America/Los_Angeles":"Los Angeles (UTC-8)",
            "America/Denver":"Denver (UTC-7)",
            "America/Chicago":"Chicago (UTC-6)",
            "America/New_York":"New York (UTC-5)",
            "America/Sao_Paulo":"São Paulo (UTC-3)",
            "Europe/London":"London (UTC+0)",
            "Europe/Paris":"Paris (UTC+1)",
            "Europe/Moscow":"Moscow (UTC+3)",
            "Asia/Dubai":"Dubai (UTC+4)",
            "Asia/Kolkata":"Kolkata (UTC+5:30)",
            "Asia/Bangkok":"Bangkok (UTC+7)",
            "Asia/Hong_Kong":"Hong Kong (UTC+8)",
            "Asia/Tokyo":"Tokyo (UTC+9)",
            "Australia/Sydney":"Sydney (UTC+10)",
            "Pacific/Auckland":"Auckland (UTC+12)"
        };

        // === POPULATE TIME ZONE SELECT ===
        const tzSelect = document.getElementById('timezone-select');
        if (tzSelect) {
            timeZones.forEach(tz => {
                const opt = document.createElement('option');
                opt.value = tz;
                opt.textContent = tzLabels[tz] || tz;
                tzSelect.appendChild(opt);
            });
        }

        // === LOAD/SAVE USER TIMEZONE ===
        function getSavedTZ() {
            return localStorage.getItem('userTimeZone') || Intl.DateTimeFormat().resolvedOptions().timeZone;
        }
        function saveTZ(tz) {
            localStorage.setItem('userTimeZone', tz);
        }

        // === DISPLAY USER TIME IN TOP LEFT ===
        function updateUserTime() {
            const userTZ = getSavedTZ();
            const now = new Date();
            const timeStr = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit', timeZone: userTZ });
            document.getElementById('user-time').textContent = timeStr + " (" + (tzLabels[userTZ] || userTZ) + ")";
        }
        setInterval(updateUserTime, 1000);
        updateUserTime();

        // === HANDLE TIMEZONE SELECT ===
        if (tzSelect) {
            tzSelect.value = getSavedTZ();
            tzSelect.onchange = function() {
                saveTZ(this.value);
                updateUserTime();
                document.getElementById('timezone-current').textContent = "Current: " + (tzLabels[this.value] || this.value);
            };
            document.getElementById('timezone-current').textContent = "Current: " + (tzLabels[tzSelect.value] || tzSelect.value);
        }

        // === DISPLAY ALL TIME ZONES ===
        function updateAllTimeZones() {
            const now = new Date();
            let html = '<table>';
            timeZones.forEach(tz => {
                const t = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit', timeZone: tz });
                html += `<tr><td><strong>${tzLabels[tz] || tz}</strong></td><td>${t}</td></tr>`;
            });
            html += '</table>';
            document.getElementById('all-timezones').innerHTML = html;
        }
        setInterval(updateAllTimeZones, 1000);
        updateAllTimeZones();

        // === SCREEN SIZE SETTINGS ===
        const screenSizeSelect = document.getElementById('screen-size-select');
        const screenSizeCurrent = document.getElementById('screen-size-current');

        function getSavedScreenSize() {
            return localStorage.getItem('userScreenSize') || 'auto';
        }
        function saveScreenSize(size) {
            localStorage.setItem('userScreenSize', size);
        }
        function applyScreenSize(size) {
            document.body.classList.remove('screen-small', 'screen-medium', 'screen-large', 'screen-xlarge');
            if (size !== 'auto') {
                document.body.classList.add('screen-' + size);
            }
            let label = {
                auto: "Auto (Responsive)",
                small: "Small (Phone)",
                medium: "Medium (Tablet)",
                large: "Large (Desktop)",
                xlarge: "Extra Large (Big Monitor)"
            }[size] || size;
            if (screenSizeCurrent) screenSizeCurrent.textContent = "Current: " + label;
        }
        if (screenSizeSelect) {
            screenSizeSelect.value = getSavedScreenSize();
            applyScreenSize(screenSizeSelect.value);
            screenSizeSelect.onchange = function() {
                saveScreenSize(this.value);
                applyScreenSize(this.value);
            };
            screenSizeCurrent.textContent = "Current: " + screenSizeSelect.options[screenSizeSelect.selectedIndex].textContent;
        }
        applyScreenSize(getSavedScreenSize());

        // === CONFETTI ===
        function launchConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            let confetti = [];
            for (let i = 0; i < 180; i++) {
                confetti.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * -canvas.height,
                    r: Math.random() * 8 + 4,
                    d: Math.random() * 80 + 40,
                    color: Math.random() > 0.5 ? "#ffd200" : "#0057b8",
                    tilt: Math.random() * 10 - 10,
                    tiltAngleIncremental: (Math.random() * 0.07) + .05,
                    tiltAngle: 0
                });
            }
            let angle = 0;
            let tiltAngle = 0;
            let animationFrame;
            function draw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                angle += 0.01;
                tiltAngle += 0.1;
                for (let i = 0; i < confetti.length; i++) {
                    let c = confetti[i];
                    c.y += (Math.cos(angle + c.d) + 3 + c.r / 2) / 2;
                    c.x += Math.sin(angle);
                    c.tiltAngle += c.tiltAngleIncremental;
                    c.tilt = Math.sin(c.tiltAngle) * 15;
                    ctx.beginPath();
                    ctx.lineWidth = c.r;
                    ctx.strokeStyle = c.color;
                    ctx.moveTo(c.x + c.tilt + c.r, c.y);
                    ctx.lineTo(c.x + c.tilt, c.y + c.tilt + c.r);
                    ctx.stroke();
                }
                animationFrame = requestAnimationFrame(draw);
            }
            draw();
            setTimeout(() => {
                cancelAnimationFrame(animationFrame);
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                canvas.style.display = "none";
            }, 5000);
        }
    </script>
</body>
</html>